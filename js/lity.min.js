/*! Lity - v2.1.0 - 2016-09-19
* http://sorgalla.com/lity/
* Copyright (c) 2015-2016 Jan Sorgalla; Licensed MIT */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],(function(n){return t(e,n)})):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e,require("jquery")):e.lity=t(e,e.jQuery||e.Zepto)}("undefined"!=typeof window?window:this,(function(e,t){"use strict";function n(e){var t=p();return T&&e.length?(e.one(T,t.resolve),setTimeout(t.resolve,500)):t.resolve(),t.promise()}function i(e,n,i){if(1===arguments.length)return t.extend({},e);if("string"==typeof n){if(void 0===i)return void 0===e[n]?null:e[n];e[n]=i}else t.extend(e,n);return this}function r(e){for(var t,n=decodeURI(e.split("#")[0]).split("&"),i={},r=0,o=n.length;r<o;r++)n[r]&&(i[(t=n[r].split("="))[0]]=t[1]);return i}function o(e,n){return e+(e.indexOf("?")>-1?"&":"?")+t.param(n)}function a(e,t){var n=e.indexOf("#");return-1===n?t:(n>0&&(e=e.substr(n)),t+e)}function l(e,n){var i=n.opener()&&n.opener().data("lity-desc")||"Image with no description",r=t('<img src="'+e+'" alt="'+i+'"/>'),o=p(),a=function(){o.reject(function(e){return t('<span class="lity-error"/>').append(e)}("Failed loading image"))};return r.on("load",(function(){return 0===this.naturalWidth?a():void o.resolve(r)})).on("error",a),o.promise()}function d(e){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+e+'"/></div>'}function s(){return m.documentElement.clientHeight?m.documentElement.clientHeight:Math.round(h.height())}function c(e){var t=f();t&&(27===e.keyCode&&t.close(),9===e.keyCode&&function(e,t){var n=t.element().find(C),i=n.index(m.activeElement);e.shiftKey&&i<=0?(n.get(n.length-1).focus(),e.preventDefault()):e.shiftKey||i!==n.length-1||(n.get(0).focus(),e.preventDefault())}(e,t))}function u(){t.each(b,(function(e,t){t.resize()}))}function f(){return 0===b.length?null:b[0]}function y(e,r,o,a){var l,d,f,y=this,v=!1,C=!1;r=t.extend({},k,r),d=t(r.template),y.element=function(){return d},y.opener=function(){return o},y.options=t.proxy(i,y,r),y.handlers=t.proxy(i,y,r.handlers),y.resize=function(){v&&!C&&f.css("max-height",s()+"px").trigger("lity:resize",[y])},y.close=function(){if(v&&!C){C=!0,function(e){e.element().attr(x,"true"),1===b.length&&(g.removeClass("lity-active"),h.off({resize:u,keydown:c})),((b=t.grep(b,(function(t){return e!==t}))).length?b[0].element():t(".lity-hidden")).removeClass("lity-hidden").each((function(){var e=t(this),n=e.data(w);n?e.attr(x,n):e.removeAttr(x),e.removeData(w)}))}(y);var e=p();return a&&t.contains(d,m.activeElement)&&a.focus(),f.trigger("lity:close",[y]),d.removeClass("lity-opened").addClass("lity-closed"),n(f.add(d)).always((function(){f.trigger("lity:remove",[y]),d.remove(),d=void 0,e.resolve()})),e.promise()}},l=function(e,n,i,r){var o,a="inline",l=t.extend({},i);return r&&l[r]?(o=l[r](e,n),a=r):(t.each(["inline","iframe"],(function(e,t){delete l[t],l[t]=i[t]})),t.each(l,(function(t,i){return!i||!(!i.test||i.test(e,n))||(!1!==(o=i(e,n))?(a=t,!1):void 0)}))),{handler:a,content:o||""}}(e,y,r.handlers,r.handler),d.attr(x,"false").addClass("lity-loading lity-opened lity-"+l.handler).appendTo("body").focus().on("click","[data-lity-close]",(function(e){t(e.target).is("[data-lity-close]")&&y.close()})).trigger("lity:open",[y]),function(e){1===b.unshift(e)&&(g.addClass("lity-active"),h.on({resize:u,keydown:c})),t("body > *").not(e.element()).addClass("lity-hidden").each((function(){var e=t(this);void 0===e.data(w)&&e.data(w,e.attr(x)||null)})).attr(x,"true")}(y),t.when(l.content).always((function(e){f=t(e).css("max-height",s()+"px"),d.find(".lity-loader").each((function(){var e=t(this);n(e).always((function(){e.remove()}))})),d.removeClass("lity-loading").find(".lity-content").empty().append(f),v=!0,f.trigger("lity:ready",[y])}))}function v(e,n,i){e.preventDefault?(e.preventDefault(),e=(i=t(this)).data("lity-target")||i.attr("href")||i.attr("src")):i=t(i);var r=new y(e,t.extend({},i.data("lity-options")||i.data("lity"),n),i,m.activeElement);if(!e.preventDefault)return r}var m=e.document,h=t(e),p=t.Deferred,g=t("html"),b=[],x="aria-hidden",w="lity-"+x,C='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',k={handler:null,handlers:{image:l,inline:function(e,n){var i,r,o;try{i=t(e)}catch(e){return!1}return!!i.length&&(r=t('<i style="display:none !important"/>'),o=i.hasClass("lity-hide"),n.element().one("lity:remove",(function(){r.before(i).remove(),o&&!i.closest(".lity-content").length&&i.addClass("lity-hide")})),i.removeClass("lity-hide").after(r))},youtube:function(e){var n=D.exec(e);return!!n&&d(a(e,o("https://www.youtube"+(n[2]||"")+".com/embed/"+n[4],t.extend({autoplay:1},r(n[5]||"")))))},vimeo:function(e){var n=E.exec(e);return!!n&&d(a(e,o("https://player.vimeo.com/video/"+n[3],t.extend({autoplay:1},r(n[4]||"")))))},iframe:d},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},j=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,D=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,E=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,T=function(){var e=m.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return t[n];return!1}();return l.test=function(e){return j.test(e)},v.version="2.1.0",v.options=t.proxy(i,v,k),v.handlers=t.proxy(i,v,k.handlers),v.current=f,t(m).on("click.lity","[data-lity]",v),v}));